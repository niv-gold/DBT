version: 2

models:
  - name: POSITION_ABC_BANK
    description: The position we have in the ABC Bank portfolio.
    columns:
      - name: UNREALIZED_PROFIT
        description: the unrealizied profit on the posiion.
        tests:
          - not_null
      - name: UNREALIZED_PROFIT_PCT
        description: >
          The unrealized profit percentage on the position.
        tests:
          - not_null
  - name: REF_POSITION_ABC_BANK
    description: The positions we have in the ABC Bank portfolio.
    columns:
      - name: UNREALIZED_PROFIT
        description: The unrealized profit on the position.
        tests:
          - not_null
      - name: UNREALIZED_PROFIT_PCT
        description: The unrealized profit % on the position.
        tests:
          - not_null
      - name: SECURITY_CODE
        description: >
          The code of the security in the position.
        tests:
          - relationships:
              to: ref('REF_ABC_BANK_SECURITY_INFO')
              field: SECURITY_CODE
              config:
                error_if: "> 1349"

